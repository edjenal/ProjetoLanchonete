<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	>

<ui:composition template="/tema.xhtml">
	<ui:define name="content">
	    <f:view>
			<h:form>
				<h:inputHidden value="#{VendaProdutosBeans.id_cli}"/>
				<br/>
				<h:outputText value="Cliente "/>
				<h:outputText value="#{VendaProdutosBeans.nm_cli}"/>
				<br/>
				<h:panelGroup rendered="#{!VendaProdutosBeans.mostrarFinalizado}">
					<h:outputText value="Categoria do produto: "/>
					<h:selectOneMenu id="id_cat" value="#{VendaProdutosBeans.id_cat}"> 
						<f:selectItems value="#{VendaProdutosBeans.categoria}"  var="categoria" itemLabel="#{categoria.ds_cat}" itemValue="#{categoria.id_cat}"/>
					</h:selectOneMenu>
					<br/>
					<h:outputText value="Descrição do produto"/>
					<h:inputText value="#{VendaProdutosBeans.nome}" />
					<h:commandButton value="Buscar"
						action="#{VendaProdutosBeans.buscar}" />
					<br/>
					<h:outputText value="Informe a quantidade do produto e clique em ESCOLHER "/>
					<h:inputText value="#{VendaProdutosBeans.qtd_venda}" onblur="submit()"/>
					<br/>
					<h:panelGroup id="listaProdutos" rendered="#{VendaProdutosBeans.mostrarTabela}">
					<br/>
						<p:dataTable value="#{VendaProdutosBeans.produtoTOs}" var="rs">
							<f:facet name="header">
					            Lista de Produtos
					        </f:facet>
					        <p:column headerText="Categoria">
					            <h:outputText value="#{rs.ds_cat}" style="width:30%"/>
					        </p:column>
					
					        <p:column headerText="Descrição" style="width:45%">
					            <h:outputText value="#{rs.ds_prod}" />
					        </p:column>
					
					        <p:column headerText="Valor">
					            <h:outputText value="R$ "/><h:outputText value="#{rs.preco_prod_tela}" />
					        </p:column>
					
					        <p:column headerText="Selecione">
					           <h:commandButton value="Escolher" action="#{VendaProdutosBeans.addProduto}">
									<f:param value="#{rs.id_prod}" name="id_prod" />
									<f:param value="#{rs.ds_prod}" name="ds_prod" />
									<f:param value="#{rs.id_cat}" name="id_cat" />
									<f:param value="#{rs.ds_cat}" name="ds_cat" />
									<f:param value="#{rs.preco_prod}" name="preco_prod" />
									<f:param value="#{VendaProdutosBeans.qtd_venda}" name="qtd_venda" />
								</h:commandButton>
					        </p:column>
					    </p:dataTable>
					</h:panelGroup>
					<h:panelGroup id="carrinho" rendered="#{VendaProdutosBeans.mostrarTabelaCompras}">
					<br/>
						<p:dataTable value="#{VendaProdutosBeans.produtosSelecionados}" var="rs">
							<f:facet name="header">
					            Carrinho de Compra(s)
					        </f:facet>
					        <p:column headerText="Categoria" style="width:20%">
					            <h:outputText value="#{rs.ds_cat}" />
					        </p:column>
					
					        <p:column headerText="Descrição">
					            <h:outputText value="#{rs.ds_prod}" />
					        </p:column>
					
					        <p:column headerText="Valor" style="width:15%">
					            <h:outputText value="R$ "/><h:outputText value="#{rs.preco_prod_tela}" />
					        </p:column>
					
					        <p:column headerText="Quant." style="width:15%">
					            <h:outputText value="#{rs.qtd_venda}" />
					        </p:column>
					        
					        <p:column headerText="Excluir ?" style="width:20%">
					            <h:commandButton value="Sim" action="#{VendaProdutosBeans.removerProduto}">
									<f:param value="#{rs}" name="produto" />
								</h:commandButton>
					        </p:column>
					    </p:dataTable>
						<h:commandButton value="Concluir" action="#{VendaProdutosBeans.concluir}"/>
						<br/>
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup rendered="#{VendaProdutosBeans.mostrarFinalizado}">
					<br/>
					<p:dataTable value="#{VendaProdutosBeans.produtosSelecionados}" var="rs">
				        <f:facet name="header">
				            Carrinho de Compra(s)
				        </f:facet>
					    <p:column headerText="Categoria" style="width:20%">
				            <h:outputText value="#{rs.ds_cat}" />
				        </p:column>
				
				        <p:column headerText="Descrição" style="width:40%">
				            <h:outputText value="#{rs.ds_prod}" />
				        </p:column>
				
				        <p:column headerText="Valor Unitário" style="width:25%">
				            <h:outputText value="R$ "/><h:outputText value="#{rs.preco_prod_tela}" />
				        </p:column>
				
				        <p:column headerText="Quant." style="width:25%">
				            <h:outputText value="#{rs.qtd_venda}" />
				        </p:column>
				    </p:dataTable>
				    <table>
				    	<tr>
				    		<td><h:outputText value="Total da Venda"/></td>
				    		<td><h:outputText value="R$ "/><h:outputText value="#{VendaProdutosBeans.totalTela}"/></td>
				    	</tr>
				    	<tr>
				    		<td><h:outputText value="Valor do Desconto "/></td>
				    		<td><h:outputText value="R$ "/><h:inputText value="#{VendaProdutosBeans.desconto}"/></td>
				    	</tr>
				    	<tr>
				    		<td><h:outputText value="Valor Recebido"/></td>
				    		<td><h:outputText value="R$ "/><h:inputText value="#{VendaProdutosBeans.recebido}"/></td>
				    	</tr>
				    </table>
					<br/>
					
					<h:outputText value="Quer inserir mais itens"/>
					<h:commandButton action="#{VendaProdutosBeans.retornarCompra}" value="Clique aqui"/>
					<br/>
					
					<h:commandButton action="#{VendaProdutosBeans.confirmar}" value="Confirmar Venda">
						<f:param value="#{VendaProdutosBeans.id_cli}" name="id_cli" />
					</h:commandButton>
					<br/>
					
				</h:panelGroup>
				<h:commandButton value="Cancelar" action="#{VendaProdutosBeans.cancelar}"/>
		</h:form>
		</f:view>
	</ui:define>
</ui:composition>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	>

<ui:composition template="/tema.xhtml">
	<ui:define name="content">
		<f:view>
			<h:form>
				Detalhe da venda
				<h:inputHidden value="#{RelatorioVendaDetalheBeans.id_venda}"/>
				<h:inputHidden value="#{RelatorioVendaDetalheBeans.valor_total_venda}"/>
				    <table>
				    	<tr>
				    		<td style="font-size:24px">Nº da venda: </td>
				    		<td><h:outputText value="#{RelatorioVendaDetalheBeans.id_venda}" style="font-size:24px"/></td>
				    	</tr>
				    	<tr>
				    		<td style="font-size:24px">Cliente: </td>
				    		<td><h:outputText value="#{RelatorioVendaDetalheBeans.nm_cliente}" style="font-size:24px"/></td>
				    	</tr>
				    	<tr>
				    		<td style="font-size:24px">Telefone: </td>
				    		<td><h:outputText value="#{RelatorioVendaDetalheBeans.tel_cli}" style="font-size:24px"/></td>
				    	</tr>
				    	<tr>
				    		<td style="font-size:24px">Data da venda: </td>
				    		<td>
				    			<h:outputText value="#{RelatorioVendaDetalheBeans.dt_venda}" style="font-size:24px"/>
				    		</td>
				    	</tr>
				    	<tr>
				    		<td style="font-size:24px">Data da Quitação: </td>
				    		<td><h:outputText value="#{RelatorioVendaDetalheBeans.dt_pag_total}" style="font-size:24px"/></td>
				    	</tr>
				    	<tr>
				    		<td style="font-size:24px">Sub-total: </td>
				    		<td><h:outputText value="R$ "/><h:outputText value="#{RelatorioVendaDetalheBeans.valor_total_vendaTela}" style="font-size:24px"/></td>
				    	</tr>
				    	<h:panelGroup rendered="#{RelatorioVendaDetalheBeans.editavel}">
				    	<tr>
				    		<td style="font-size:24px">Desconto: </td>
				    		<td><h:outputText value="R$ "/><p:inputText value="#{RelatorioVendaDetalheBeans.valor_desconto_tela}" validatorMessage="Valor inválido para desconto!">
				    			<f:validateRegex pattern="d*[0-9]{0,8}(,d*[0-9]{0,2})?"/>
				    			</p:inputText>
				    			</td>
				    	</tr>
				    	<tr>
				    		<td style="font-size:24px">Valor Recebido: </td>
				    		<td><h:outputText value="R$ "/><p:inputText value="#{RelatorioVendaDetalheBeans.recebido}" validatorMessage="Valor recebido inválido!">
				    			<f:validateRegex pattern="d*[0-9]{0,8}(,d*[0-9]{0,2})?"/>
				    			</p:inputText>
				    			</td>
				    	</tr>
				    	<tr>
				    		<td><p:commandButton value="Atualizar" action="#{RelatorioVendaDetalheBeans.update}" ajax="false"/></td>
				    		<td><p:commandButton value="Retornar" action="/relatorio/balcao/filtro.xhtml" ajax="false"/></td>
				    	</tr>
				    	</h:panelGroup>
				    	<h:panelGroup rendered="#{!RelatorioVendaDetalheBeans.editavel}">
				    	<tr>
				    		<td style="font-size:24px">Desconto: </td>
				    		<td style="font-size:24px"><h:outputText value="R$ "/><h:outputText value="#{RelatorioVendaDetalheBeans.valor_desconto_tela}"/></td>
				    	</tr>
				    	<tr>
				    		<td style="font-size:24px">Total: </td>
				    		<td style="font-size:24px"><h:outputText value="R$ "/><h:outputText value="#{RelatorioVendaDetalheBeans.valor_total_com_descontoTela}"/></td>
				    	</tr>
				    	<tr>
				    		<td><p:commandButton value="Retornar" action="/relatorio/balcao/filtro.xhtml" ajax="false"/></td>
				    		<td></td>
				    	</tr>
				    	</h:panelGroup>
				    </table>
				    <h:panelGroup>
				    	<p:dataTable var="produtos" value="#{RelatorioVendaDetalheBeans.produtos}">
					    	<f:facet name="header">
					            Produtos Desta Compra
					        </f:facet>
					        <p:column headerText="Categoria">
					            <h:outputText value="#{produtos.ds_cat}" />
					        </p:column>
					
					        <p:column headerText="Produto">
					            <h:outputText value="#{produtos.ds_prod}" />
					        </p:column>
					
					        <p:column headerText="Valor Unitário">
					            <h:outputText value="R$ "/><h:outputText value="#{produtos.preco_prod_vendidoTela}" />
					        </p:column>
					        
					        <p:column headerText="Quantidade">
					            <h:outputText value="#{produtos.qtd_prod}" />
					        </p:column>
					
					        <p:column headerText="Valor total por produto">
					            <h:outputText value="R$ "/><h:outputText value="#{produtos.valor_por_produto}" />
					        </p:column>
					    </p:dataTable>
				    </h:panelGroup>
			</h:form>
		</f:view>
	</ui:define>
</ui:composition>
</html>